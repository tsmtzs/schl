%%
%% This is file `schl.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% schl.dtx  (with options: `package')
%% 
%% This is a generated file.
%% 
%% Copyright (C) 2019 by Tassos Tsesmetzis
%% 
%% This file may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either
%% version 1.3 of this license or any later
%% version.  The latest version of this license is in:
%% 
%% http://www.latex-project.org/lppl.txt
%% 
%% and version 1.3 or later is part of all distributions of
%% LaTeX version 2005/12/01 or later.
%% 

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{schl}
[2019/06/15 v0.1 Custom package]
\DeclareOption{greek}{
  \input{languages/schl-greek.def}
}
%%  Execute default options.
\ExecuteOptions{greek}
\ProcessOptions\relax
%%
%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% REQUIRED PACKAGES
%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage{fontspec}
\RequirePackage[shortlabels]{enumitem}
\RequirePackage{mdframed}
\RequirePackage{amsmath}
\RequirePackage{calc}
\RequirePackage{etoolbox}
%%
%%
%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% LOCALIZATION
%% To localize the package schl, define the following macros
%% with each term in your language.
%% \grade@term             : Used by \examdetails and \examdetailsii.
%% \subject@term           : Used by \examdetails and \examdetailsii.
%% \testwriter@term        : Used by \examdetails.
%% \testsupervisor@term    : Used by \examdetails.
%% \date@term              : Used by \examdetails, \examdetailsii and \datefield.
%% \schoolyear@term        : Used by \examdetailsii.
%% \schoolyearabbr@term    : Used by \examdetails. An abbreviation for the word 'schoolyear'.
%% \examperiod@term        : Used by \examdetails.
%% \lastname@term          : Used by \examdetailsii.
%% \name@term              : Used by \examdetailsii.
%% \time@term              : Used by \examdetailsii.
%% \examnoabbr@term        : Used by \examdetailsii. An abbreviation for the exam number of a student.
%% \fullname@term          : Used by \fullname.
%% \deadline@term          : Used by \deadline.
%% \theoryheader@term      : Used by \theorypart. It is the word 'THEORY'.
%% \exerciseheader@term    : Used by \exercisepart. It is the word 'EXERCISES'.
%% \worksheet@term         : Used by \worksheettile.
%% \termtest@term          : Used by \examtitle. It is the word that corresponds to a
%%                           summary test during the year.
%% \exams@term             : Used by \finalexamheader. The word 'EXAMS'.
%% \period@term            : Used by \finalexamheader. The word 'PERIOD'.
%% \headmaster@term        : Used by \signatures.
%% \answerabbr@term        : Used by \answer. An abbreviation for the word 'answer'.
%% \exercise@term          : Used by the environment 'exercise'.
%% \question@term          : Used by the environment 'question'.
%% \task@term              : Used by the environment 'task'.
%% \solution@term          : Used by \solution.
%% \hint@term              : Used by \hint.
%% \points@term            : Used by \points. You might need to use an 'if' to distinguise
%%                           the cases for one or many points.
%% \trueabbr@term          : Used by \truefalselabel. The first letter of True.
%% \falseabbr@term         : Used by \truefalselabel. The first letter of False.
%%
%% Other internal macros that are used are the following
%% \schl@wish             : A wish for good luck, usually printed in tests. Used by \wish.
%% \schl@headmaster       : The name of the headmaster. It is set with \headmaster.
%% \schl@teacher          : Teacher's name. It is set with \teacher.
%% \schl@subject          : The subject of the test, worksheet etc. (algebra, ...). It is set with \subject.
%%                          Used by \schoollogo, \examdetails and \examdetailsii
%% \schl@grade            : The grade. It is set with \grade. Used by \schoollogo, \examdetails
%%                          and \examdetailsii
%% \schl@schldate         : The date that the produced document will be given to students.
%%                          Defined with \schldate and used by \examdetails and \examdetailsii.
%% \schl@examtime         : The time of the exam. It is set with \examtime and used by \examdetailsii.
%% \schl@schoolyear       : School year is set with \schoolyear and used by \examdetails and \examdetailsii.
%% \schl@authorityi, \schl@authorityii, \schl@authorityiii
%%                        : These three macros define a hierarhy of authorities with
%%                          \schl@authorityi > \schl@authorityii > \schl@authorityiii.
%%                          e.x. \schl@authorityi might be the Ministry of Education, etc
%%                          They are set with \authorityi, \authorityii and \authorityiii
%%                          and are used in \authoritylogo.
%% \schl@school           : The name of the school.Is set with \school. It is used by \schoollogo
%%                          \authoritylogo.
%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%%
%% Default line thickness for macro \blankspace.
\def\schl@rulethickness{0.3pt}
%% Set \schl@rulethickness
\def\rulethickness#1{%
  \def\schl@rulethickness{#1}
 }
%%
%% Macro \signatures is used to write the names of the teacher(s) and the headmaster.
%% A handwritten signature is written in the right of those names.
%% \signatures uses a \parbox with length \signatureslength.
%% Each new name is written in a new line. The length between lines is
%% \signaturelineskip.
\newlength{\signatureslength}
\setlength{\signatureslength}{13em}
\newlength{\signaturelineskip}
\setlength{\signaturelineskip}{7ex}
%%
%% Lengths \leftmatchwidth and \rightmatchwidth are used in macro \matchingque.
%% Both specify the lenth of a \parbox. \leftmatchwidth is the length of the left
%% column of the matching question, and \rightmatchwidth, is the length of the
%% right. The default length is 150pt.
\newlength{\leftmatchwidth}
\newlength{\rightmatchwidth}
\setlength{\leftmatchwidth}{150pt}
\setlength{\rightmatchwidth}{150pt}
%%
%% The following length is used inside truefalse environment.
%% It specifies the length of a \parbox. The letters T (true) and F
%% are the text of this \parbox.
\newlength{\truefalselength}
\setlength{\truefalselength}{50pt}
%%
%% Macro \truefalselabel prints T - F inside a \parbox.
%% \parbox's argument height is given the value 0pt.
%% This is done so that the top of the letters T - F allign
%% with the line of the true-false question.
%% This behaviour is heavily dependend on the font used and font size (\large here).
%%
%% \trueabbr@term and \falseabbr@term are the first letters of the words True, False.
\def\truefalselabel{\parbox[t][0pt][c]{\truefalselength}{\large \trueabbr@term\hfill\falseabbr@term}}
%%
%% Define a new true-false toggle named \first. This is used inside the environment truefalse.
%% It is used to discriminate the first item from the rest items.
\newtoggle{first}

%%
%% Macro \examdetailsii uses a 'tabular' environment. The space between rows is
\renewcommand{\arraystretch}{1.5}
%%
%% 'groperators' is used to typeset math operators in Greek.
%% Based on p. 110 of
%% Digital Typography using Latex
%% by A. Syropoulos, A. Tsolomitis, and N. Sofroniou
 \DeclareSymbolFont{groperators}{\encodingdefault}{\familydefault}{m}{n}
%%
%% \defaultletterspace is the default letter space percentage for macro \letterspace
\def\defaultletterspace{10.0}
%%
%%
%% Redefine sine, cosine, tangent and contangent operators in Greek.
\renewcommand{\sin}{\mathop{%
    \mathgroup\symgroperators \eta\mu}\nolimits}
\renewcommand{\cos}{\mathop{%
    \mathgroup\symgroperators \sigma\upsilon\nu}\nolimits}
\renewcommand{\tan}{\mathop{%
    \mathgroup\symgroperators \varepsilon\phi}\nolimits}
\renewcommand{\cot}{\mathop{%
    \mathgroup\symgroperators \sigma\phi}\nolimits}
%%
%% Greatest common devisor and least common multiple operators in Greek.
  \renewcommand{\gcd}{\mathop{%
    \mathgroup\symgroperators ΜΚΔ}\nolimits}
\DeclareMathOperator{\lcm}{ΕΚΠ}
%%
%% Write $x\to x_0$ under \lim
\newcommand{\limdisplay}[1]{\displaystyle\lim_{#1}}
%% This command creates dots that represent a blank space.
%% The first argument accepts a length. The deviation from the baseline.
%% Second argument is the number of dots that are printed.
%% From egreg's answer on tex.stackexchange.org
%% https://tex.stackexchange.com/questions/300207/repeat-characters-n-times
%% accessed June 06, 2019
 \newcommand\lowerdots[2][-0.3ex]{%
   \begingroup
   \lccode`m=`.\relax
   \raisebox{#1}{\lowercase\expandafter{\romannumeral\number\number#2 000}}%
   \endgroup
 }
%%
%% A line that represents blank space.
%% First argument: deviation from base line.
%% Second argument: line width.
\newcommand\blankspace[2][-0.3ex]{%
  \raisebox{#1}{\rule{#2}{\schl@rulethickness}}
 }
%%
%% A list for questions
\newlist{question}{enumerate}{1}
\setlist*[question]{%
  align=left,
  label=\normalsize\bf \question@term\  \arabic*.,
  wide,
  leftmargin=0pt,
  labelindent=0pt
}
%%
%% A list for exercises.
\newlist{exercise}{enumerate}{1}
\setlist*[exercise]{%
  align=left,
  label=\normalsize\bf\exercise@term\  \arabic*.,
  wide,
  leftmargin=0pt,
  labelindent=0pt
}
%%
%% A list for tasks.
\newlist{schltask}{enumerate}{1}
\setlist*[schltask]{%
  align=left,
  label=\normalsize\bf\letterspace{\defaultletterspace}\task@term\  \Alph*,
  wide,
  leftmargin=0pt,
  labelindent=0pt
}
%%
%%  Space of capital word letters
%% \addfontfeature is from fontspec package.
\def\letterspace#1{\addfontfeature{LetterSpace=#1}}
%%
%% Insert multiple choice anwers.
%% Leave a blank line before and after \begin{multichoice} ... \end{multichoice}
%% for proper rendering.
\newlist{multichoice}{enumerate*}{1}
\setlist*[multichoice]{
  labelindent=\parindent,
  label=\Alph*.,
  itemjoin=\hspace{\fill},
  before=\hspace{\fill},
  after=\hspace{\fill}
}
%%
%% Leave a blank line before and after \begin{tickchoice} ... \end{tickchoice}
%% for proper rendering
\newlist{tickchoice}{itemize}{1}
\setlist[tickchoice]{labelindent=\parindent,label={\large$\square$}}
\newlist{tickchoice*}{itemize*}{1}
\setlist*[tickchoice*]{
  labelindent=\parindent,
  label={\large$\square$},
  itemjoin=\hspace{\fill},
  before=\hspace{\fill},
  after=\hspace{\fill}
}
%% An environment to typeset true-false questions. Is is defined with the enumitem package.
%% Each question is followed by the letters \trueabbr@term and \falseabbr@term.
%% It uses the calc package
%%
%% Adapted from cfr's answer on
%% https://tex.stackexchange.com/questions/164613/adding-code-at-the-end-of-each-list-item
%% accessed 11/07/2019
\newlist{truefalse}{enumerate}{1}
\setlist[truefalse]{label={\bf \arabic*.},%
  before*={%
    \let\defaultitem\item%      Save the standard definition of \item in a macro.
    \toggletrue{first}%                 Set the first toggle with initial value true.
    \def\item{%
      \iftoggle{first}{%
        \togglefalse{first}%              Set the first toggle to take the value false.
        \defaultitem\begin{minipage}[t]{0.8\linewidth minus \truefalselength}%
        }{%
        \end{minipage}\hfill\truefalselabel\defaultitem%
        \begin{minipage}[t]{0.8\linewidth minus \truefalselength}%
        }
      }% new, temporary defition of \item
    },
    after*={%   This takes care of adding the fill for the final item on
      %         the list and just makes sure that \item is reset to its standard definition
    \end{minipage}\hfill\truefalselabel% fill for final item in list
    \let\item\defaultitem% restore standard definition of \item
  }%
}
\newcommand\matchingque[3][300pt]{%
  \begin{center}
    \parbox[c]{#1}{
      \parbox[c]{\leftmatchwidth}{%
        \begin{leftmatching}
          \@for\tmp:=#2%
          \do{%
          \item \tmp
          }
        \end{leftmatching}
      }\hfill%
      \parbox[c]{\rightmatchwidth}{%
        \begin{rightmatching}
          \@for\tmp:=#3%
          \do{%
          \item \tmp
          }
        \end{rightmatching}
      }
    }
  \end{center}
}
\newlist{leftmatching}{enumerate}{1}
\newlist{rightmatching}{enumerate}{1}
\setlist*[leftmatching]{label=\bf\Alph*.}
\setlist*[rightmatching]{label=\bf\arabic*.}
%%
%% Write the answer of an exercise.
\newcommand\answer[1]{%
  \hfill{\footnotesize (\answerabbr@term: #1)}
}
%%
%% With this command you write the solution of an exercise.
\newcommand\solution[1]{%
  \par\noindent\phantom{.}\hfill\textbf{\solution@term}\hfill\phantom{.}\par%
  \noindent #1
}
%%
%% A macro for exercise hints.
\newcommand\hint[1]{%
  \par{\scriptsize\noindent\textbf{\hint@term:} #1}%
}
%%
%% Print the deadline of an assignment
\newcommand\deadline[1]{%
  \noindent{{\bf\normalsize\deadline@term}: #1}
}
%%
%% Large centered text in bold face.
\newcommand\heading[1]{%
  \begin{center}
    {\bf\large #1}
  \end{center}
}
%%
%% The title of a worksheet.
%% Argument is a text to be appended in \worksheet@term
\newcommand\worksheettitle[1]{%
  \heading{\worksheet@term\  #1}
}
%%
%% Exam, term test title.
\newcommand\examtitle[2][\termtest@term]{%
  \heading{#1 #2}
}
%%
%% Default headers for final exams.
\newcommand\finalexamheader[2]{%
  \heading{\letterspace{\defaultletterspace} #1 \exams@term\\[0.5ex] \period@term\  #2}
}
%%
%% A generic header for centered framed text.
\newcommand\schl@framedbox[1]{%
  \begin{center}
    \fbox{\large{\bf\letterspace{\defaultletterspace} #1} }%
  \end{center}
}
\newcommand\theorypart{%
  \schl@framedbox{\theoryheader@term\!}
}
\newcommand\exercisepart{%
  \schl@framedbox{\exerciseheader@term\!}
}
%%
%% Set subject, grade, date, school year etc.
\newcommand\school[1]{\def\schl@school{#1}}
\newcommand\headmaster[1]{\def\schl@headmaster{#1}}
\newcommand\teacher[1]{\def\schl@teacher{#1}}
\newcommand\subject[1]{\def\schl@subject{#1}}
\newcommand\grade[1]{\def\schl@grade{#1}}
\newcommand\schoolyear[1]{\def\schl@schoolyear{#1}}
\newcommand\schldate[1]{\def\schl@schldate{#1}}
\newcommand\examtime[1]{\def\schl@examtime{#1}}
\newcommand\authorityi[1]{\def\schl@authorityi{#1}}
\newcommand\authorityii[1]{\def\schl@authorityii{#1}}
\newcommand\authorityiii[1]{\def\schl@authorityiii{#1}}
%%
%% Print the points of an exescise.
\newcommand{\points}[2][\hfill]{%
#1(\textbf{\footnotesize \points@term{#2}\  #2})
}
%%
%% A field for writing the full name.
\newcommand\fullname[1]{%
  \noindent{\normalsize\fullname@term :} #1
}
%%
%% A field for writing the date.
\newcommand\datefield[1][0]{%
  \noindent{\normalsize\date@term :}
}
%%
%% School logo
%% Arg 1 is the length of the parbox.
\def\schoollogo#1{%
  \parbox[t]{#1}{%
    \schl@school\\%
    \schl@grade\\%
    \schl@subject\\%
    \schl@teacher
  }
}
%%
%% Logo for exams.
%% Argument is path to a picture.
\newcommand\authoritylogo[1]{%
  \noindent\parbox[t]{40ex}{%
    \centering%
    \includegraphics{#1}

    \vspace{\lineskip}

    {\bf\letterspace{\defaultletterspace}\schl@authorityi}

    \vspace{3\lineskip}

    {\footnotesize\letterspace{\defaultletterspace}\schl@authorityii}

    \vspace{2\lineskip}

    {\footnotesize\letterspace{\defaultletterspace}\schl@authorityiii}

    \vspace{3\lineskip}

    {\small\letterspace{\defaultletterspace}\MakeUppercase{\schl@school}}
  }
}
%%
%% Print details of the exam.
%% First argument is the line width for the frame.
%% Second argument is the length of the \parbox.
\newcommand\examdetails[2][3pt]{%
  \parbox[t]{#2}{
    \begin{mdframed}[linewidth=#1]
      \normalsize%
      {%
        \bf\letterspace{\defaultletterspace}%
        \schoolyearabbr@term:\hspace{3pt}\schl@schoolyear
      }\\[1.0ex]
      \textbf{\grade@term:}\hspace{3pt}\schl@grade\\[1.0ex]
        \textbf{\subject@term:}\hspace{3pt}\schl@subject \\[1.0ex]
        \textbf{\testwriter@term:}\hspace{3pt}\schl@teacher\\[1.0ex]
        \textbf{\testsupervisor@term:}\\[1.0ex]
        \textbf{\date@term:}\hspace{3pt}\schl@schldate
    \end{mdframed}
  }
}
\newcommand\examdetailsii{%
  \parbox[t]{330pt}{%
    \begin{center}%
      \underline{\bf\letterspace{\defaultletterspace}\schoolyear@term\  \schl@schoolyear}%
    \end{center}
    \begin{tabular}{|c|p{60pt}|p{40pt}|p{60pt}|}
      \hline
      {\bf\letterspace{\defaultletterspace}\lastname@term:} & \multicolumn{3}{|c|}{} \\
      \hline
      {\bf\letterspace{\defaultletterspace}\name@term:} & \multicolumn{3}{|c|}{} \\
      \hline
      {\bf\letterspace{\defaultletterspace}\examnoabbr@term:} & %
                      & {\bf\letterspace{\defaultletterspace}\MakeUppercase{\grade@term}:}
                      & \schl@grade \\
      \hline
      {\bf\letterspace{\defaultletterspace}\MakeUppercase{\subject@term}:} %
                      & \multicolumn{3}{|c|}{\schl@subject} \\
      \hline
      {\bf\letterspace{\defaultletterspace}\MakeUppercase{\date@term}:} & \schl@schldate
                      & {\bf\letterspace{\defaultletterspace}\time@term:} %
                      & \schl@examtime\\
      \hline
    \end{tabular}
  }
}
\newcommand\signer[1]{\par #1}
\newcommand\signatures[2][\headmaster@term]{%
  \parbox[t]{\signatureslength}{%
    \setlength \baselineskip{\signaturelineskip}
    \begin{center}
      #1 \\ #2
    \end{center}
  }
}
%%
%% A wish
\newcommand\wish[1][\schl@wish]{%
  \begin{center}
      {\LARGE\bf #1}
  \end{center}
}
\endinput
%%
%% End of file `schl.sty'.
